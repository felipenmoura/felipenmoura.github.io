!function(){var t=document.body,e={},a={};a.XHR={obj:new XMLHttpRequest,askFor:function(t,e){var o=a.XHR.obj;o.onreadystatechange=function(){4==o.readyState&&e(o.responseText,200==o.status)},o.open("GET",t,!0),o.send(null)}},a.showContent=function(t,o,i){e={page:t,detail:o,extra:i},a.updatePageStatus()},a.clickManager=function(o){var i,n=o.target||o.srcElement,r=n.tagName.toLowerCase(),l=n.classList;if("a"==r&&l.contains("local")){if(l.contains("inactive"))return o.preventDefault(),o.stopPropagation(),!1;i=n.getAttribute("href").replace("/","").split("/"),a.showContent(i[0],i[1],i[2]),o.preventDefault(),o.stopPropagation()}else if((i=n.getAttribute("data-yt-ref"))||(i=n.parentNode.getAttribute("data-yt-ref")))e.extra=i,a.videoBg=n.getAttribute("src")||n.firstElementChild.getAttribute("src"),a.updatePageStatus();else if(l.contains("closeLayerBtn"))a.closeModal();else if(l.contains("art-nav-tbn"))if(l.contains("art-tools"))"tools"!=(s=document.getElementById("articles-nav")).getAttribute("data-show")?(s.setAttribute("data-show","tools"),t.classList.remove("see-all-articles")):s.removeAttribute("data-show"),a.registerEvent("button","click","Article tools");else if(l.contains("art-see-list"))t.classList.toggle("see-all-articles"),a.registerEvent("button","click","See all articles");else{var s=document.getElementById("the-article"),c=parseInt(s.getAttribute("data-text-size"));switch(n.id){case"article-tool-bigger":c<4&&(c++,s.setAttribute("data-text-size",c),a.registerEvent("button","click","Font Size UP - Article tools",c));break;case"article-tool-smaller":c>1&&(c--,s.setAttribute("data-text-size",c),a.registerEvent("button","click","Font Size DOWN - Article tools",c));break;case"article-tool-contrast":"on"==s.getAttribute("data-contrast")?(s.setAttribute("data-contrast","off"),a.registerEvent("button","click","Contrast - Article tools","off")):(s.setAttribute("data-contrast","on"),a.registerEvent("button","click","Contrast - Article tools","on"))}}else n.parentNode.classList.contains("utils-thumb")&&a.registerEvent("button","click","Opened an image",n.getAttribute("src"))},a.showPlayer=function(t){var e=document.getElementById("playerLayer"),o=document.getElementById("playerElement");e.style.backgroundImage="url("+t.bg+")",o.style.backgroundImage="url("+t.bg+")",o.setAttribute("src","//www.youtube.com/embed/"+t.ytRef+"?showinfo=0"),a.registerEvent("button","click","Watch video",t.ytRef)},a.closePlayer=function(){document.getElementById("playerElement").removeAttribute("src")},a.showModal=function(e){switch(e.type){case"player":a.showPlayer(e)}t.setAttribute("data-full-layer",e.type),a.registerPageView()},a.closeModalLayer=function(){switch(t.getAttribute("data-full-layer")){case"player":a.closePlayer()}t.removeAttribute("data-full-layer"),a.registerPageView()},a.closeModal=function(t){e.extra=!1,a.updatePageStatus(),t?a.registerEvent("key","press","Close modal","Used the ESC key"):a.registerEvent("button","click","Close modal","Used the mouse or touch")},a.setArticlesLoadStatus=function(t){t>=100?(a.articlesloader.style.width="120%",setTimeout(function(){a.articlesContainer.innerHTML=a.tmpContainer.querySelector("section").innerHTML,a.tmpContainer.innerHTML="",a.applySH(),a.applyComments(),a.applySocialButtons(),a.registerPageView()},400)):a.articlesloader.style.width=t+"%"},a.loadArticleAsync=function(e){var o,i,n=0;a.tmpContainer=a.tmpContainer||document.getElementById("articleTmpElement"),a.articlesContainer=a.articlesContainer||document.getElementById("articles-container"),a.articlesloader=document.getElementById("loading-bar"),a.setArticlesLoadStatus(30),t.classList.remove("see-all-articles"),a.XHR.askFor("/articles/"+e+"/index-ajax.html",function(t,e){a.setArticlesLoadStatus(60),e&&(a.tmpContainer.innerHTML=t,o=[].slice.call(a.tmpContainer.querySelectorAll("img")),i=function(){++n>=o.length-1&&a.setArticlesLoadStatus(100)},o.length?o.forEach(function(t){t.onload=t.onerror=i}):i())})},a.applySH=function(){Prism.highlightAll()},a.applyComments=function(){},a.updatePageStatus=function(){e.page?t.setAttribute("data-page",e.page):t.setAttribute("data-page","home"),"articles"==e.page&&e.detail?a.loaded&&a.loadArticleAsync(e.detail):(t.classList.remove("see-all-articles"),document.getElementById("articles-nav").removeAttribute("data-show")),("videos"==e.detail||"labs"==e.detail)&&e.extra?a.showModal({type:"player",bg:a.videoBg||"",ytRef:e.extra}):a.closeModalLayer(),e.detail?t.setAttribute("hash-bang-detail",e.detail):t.removeAttribute("hash-bang-detail"),e.extra?t.setAttribute("hash-bang-extra",e.extra):t.removeAttribute("hash-bang-extra");var o="/"+(e.page||"");e.detail&&(o+="/"+e.detail),e.extra?o+="/#"+e.extra:o.match(/\/$/)||(o+="/"),a.registerPageView(),location.pathname+(location.hash||"#")!=o+(e.extra||"#")&&(history.pushState({},o,o),a.setTitle())},a.setTitle=function(){var t=e.page||"home";e.detail&&(t+=" | "+e.detail),e.extra&&(t+=" | "+e.extra),document.title=t.replace(/\-/g," ")+" | Felipe N. Moura"},a.registerPageView=function(){ga("send","pageview",{page:location.pathname+location.search+location.hash})},a.registerEvent=function(t,a,o,i){ga("send","event",t,a,o,i||1,{page:[e.page,e.detail,e.extra].filter(function(t){return t}).join("/")})},a.goToPage=function(t){var o=(t=t||location).pathname;(o=o.split("/")).length?(e.page=o[1],e.detail=o[2],e.extra=location.hash.replace("#",""),a.updatePageStatus()):(e={},a.updatePageStatus())},a.applpiedSocialButtons=!1,a.applySocialButtons=function(){},t.addEventListener("click",a.clickManager),window.addEventListener("popstate",function(t){a.goToPage(location)}),window.addEventListener("hashchange",function(t){e.extra="",a.updatePageStatus()}),window.addEventListener("load",function(t){window.scrollTo(0,0),a.goToPage(location),a.applySH(),a.applyComments(),a.applySocialButtons(),setTimeout(function(){a.loaded=!0}),a.setTitle()}),window.addEventListener("keyup",function(e){switch(e.keyCode){case 27:a.closeModal(!0),t.classList.remove("see-all-articles")}}),a.goToPage(location)}();